<html>
<head>
<title> fisrt app on blockstack</title>

<link rel="manifest" href="manifest.json"/>
<script src="blockstack.js" >
</script>

<script language = "javascript" type = "text/javascript"  >

 function signin() {
   blockstack.redirectToSignIn()
 }
 function sigout() {
   blockstack.signUserOut(window.location.origin)
 }
  function showProfile(profile) {
   var person = new blockstack.Person(profile)
   
   document.getElementById("nom").innerHTML =person.name();
   document.getElementById("avatar-image").setAttribute('src', person.avatarUrl());
   //document.getElementById('section-1').style.display = 'none'
   //document.getElementById('section-2').style.display = 'block'
 }

 if (blockstack.isUserSignedIn()) {
  
  const userData = blockstack.loadUserData()
   showProfile(userData.profile)
 } else if (blockstack.isSignInPending()) {
   blockstack.handlePendingSignIn()
   .then(userData => {
     showProfile(userData.profile)
   })
 }
 function issigin()
 { if (blockstack.isUserSignedIn()) { document.getElementById("state").innerHTML ='signed ok';}
  else{ document.getElementById("state").innerHTML ='not signed'; }
  if (blockstack.isUserSignedIn()) {
  
  const userData = blockstack.loadUserData()
   showProfile(userData.profile)
 } else if (blockstack.isSignInPending()) {
   blockstack.handlePendingSignIn()
   .then(userData => {
     showProfile(userData.profile)
   })
 }
 }
 function fnbfile()
 {var x=blockstack.listFiles();
  document.getElementById("pnbf").innerHTML =x.valueOf();
 }
</script>
</head>
<body>

<h2 align="center"> welcome.... clik login to enter the application</h2>
<input align="center" type="button" value="login" id="sig" onclick="signin();" />
 <p id="nom"> </p>
 <input align="center" type="button" value="signout" id="sout" onclick="sigout();" />
 <input align="center" type="button" value="isgned" id="issigned" onclick="issigin();" />
 <p id="state"> </p>
  <input align="center" type="button" value="nb files" id="bnbf" onclick="fnbfile();" />
 <p id="pnbf"> </p>
  
  <img id="avatar-image" src="" width="300" height="300"/>

</body>
</html>
